<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>API Reference - PSP Documentation</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        * { font-family: 'Inter', sans-serif; }
        .code-block {
            background: #1a1a2e;
            border-radius: 12px;
            overflow: hidden;
        }
        .syntax-keyword { color: #c792ea; }
        .syntax-string { color: #a5e844; }
        .syntax-comment { color: #5c6370; opacity: 0.8; }
        .syntax-function { color: #82aaff; }
        .syntax-variable { color: #ffcb6b; }
        .syntax-type { color: #f78c6c; }
    </style>
</head>
<body class="bg-gray-50">
    <!-- Navigation -->
    <nav class="bg-white border-b border-gray-200 sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center py-4">
                <div class="flex items-center space-x-3">
                    <div class="w-8 h-8 bg-gradient-to-br from-blue-500 to-purple-600 rounded-lg flex items-center justify-center">
                        <i class="fas fa-sync-alt text-white text-sm"></i>
                    </div>
                    <h1 class="text-lg font-bold text-gray-900">API Reference</h1>
                </div>
                <a href="../index.html" class="text-blue-600 hover:text-blue-800">
                    <i class="fas fa-home mr-2"></i>Home
                </a>
            </div>
        </div>
    </nav>

    <div class="max-w-6xl mx-auto px-4 py-16">
        <div class="grid grid-cols-1 lg:grid-cols-4 gap-8">
            <!-- Sidebar -->
            <div class="lg:col-span-1">
                <div class="bg-white rounded-lg p-6 border border-gray-200 sticky top-24">
                    <h3 class="font-semibold text-gray-900 mb-4">API Sections</h3>
                    <nav class="space-y-2">
                        <a href="#session" class="block text-gray-600 hover:text-blue-600 py-1">Session</a>
                        <a href="#adapter" class="block text-gray-600 hover:text-blue-600 py-1">Adapter</a>
                        <a href="#storage" class="block text-gray-600 hover:text-blue-600 py-1">Storage</a>
                        <a href="#cli" class="block text-gray-600 hover:text-blue-600 py-1">CLI</a>
                        <a href="#mcp" class="block text-gray-600 hover:text-blue-600 py-1">MCP Tools</a>
                    </nav>
                </div>
            </div>

            <!-- Main Content -->
            <div class="lg:col-span-3">
                <div class="bg-white rounded-lg p-8 border border-gray-200">
                    <h1 class="text-4xl font-bold text-gray-900 mb-6">API Reference</h1>
                    <p class="text-xl text-gray-600 mb-8">
                        Complete API documentation for all PSP components, methods, and interfaces.
                    </p>

                    <!-- Session API -->
                    <section id="session" class="mb-12">
                        <h2 class="text-2xl font-bold text-gray-900 mb-4">
                            <i class="fas fa-database text-blue-600 mr-2"></i>
                            Session
                        </h2>
                        
                        <p class="text-gray-600 mb-6">
                            The core Session class provides all functionality for creating, capturing, and restoring browser sessions.
                        </p>

                        <div class="space-y-6">
                            <!-- Constructor -->
                            <div class="border border-gray-200 rounded-lg p-6">
                                <h3 class="text-lg font-semibold text-gray-900 mb-3">Session.create(options)</h3>
                                <p class="text-gray-600 mb-4">Creates a new session instance with the specified configuration.</p>
                                
                                <div class="code-block mb-4">
                                    <div class="p-4 font-mono text-sm">
                                        <div><span class="syntax-keyword">interface</span> <span class="syntax-type">SessionOptions</span> {</div>
                                        <div>&nbsp;&nbsp;<span class="syntax-variable">name</span>: <span class="syntax-type">string</span>;</div>
                                        <div>&nbsp;&nbsp;<span class="syntax-variable">description</span>?: <span class="syntax-type">string</span>;</div>
                                        <div>&nbsp;&nbsp;<span class="syntax-variable">tags</span>?: <span class="syntax-type">string[]</span>;</div>
                                        <div>&nbsp;&nbsp;<span class="syntax-variable">storage</span>: <span class="syntax-string">'local'</span> | <span class="syntax-string">'redis'</span> | <span class="syntax-string">'database'</span>;</div>
                                        <div>&nbsp;&nbsp;<span class="syntax-variable">storageOptions</span>?: <span class="syntax-type">StorageOptions</span>;</div>
                                        <div>&nbsp;&nbsp;<span class="syntax-variable">features</span>?: <span class="syntax-type">FeatureConfig</span>;</div>
                                        <div>}</div>
                                    </div>
                                </div>

                                <div class="bg-blue-50 border border-blue-200 rounded-lg p-4">
                                    <h4 class="font-semibold text-blue-900 mb-2">Example</h4>
                                    <div class="code-block">
                                        <div class="p-4 font-mono text-sm">
                                            <div><span class="syntax-keyword">const</span> <span class="syntax-variable">session</span> = <span class="syntax-keyword">await</span> <span class="syntax-variable">Session</span>.<span class="syntax-function">create</span>({</div>
                                            <div>&nbsp;&nbsp;<span class="syntax-variable">name</span>: <span class="syntax-string">'Gmail Session'</span>,</div>
                                            <div>&nbsp;&nbsp;<span class="syntax-variable">tags</span>: [<span class="syntax-string">'gmail'</span>, <span class="syntax-string">'production'</span>],</div>
                                            <div>&nbsp;&nbsp;<span class="syntax-variable">storage</span>: <span class="syntax-string">'local'</span></div>
                                            <div>});</div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Capture Method -->
                            <div class="border border-gray-200 rounded-lg p-6">
                                <h3 class="text-lg font-semibold text-gray-900 mb-3">session.capture(page)</h3>
                                <p class="text-gray-600 mb-4">Captures the current browser state including cookies, storage, and authentication data.</p>
                                
                                <div class="code-block mb-4">
                                    <div class="p-4 font-mono text-sm">
                                        <div><span class="syntax-keyword">async</span> <span class="syntax-function">capture</span>(<span class="syntax-variable">page</span>: <span class="syntax-type">Page</span>): <span class="syntax-type">Promise&lt;SessionData&gt;</span></div>
                                    </div>
                                </div>

                                <div class="bg-green-50 border border-green-200 rounded-lg p-4">
                                    <h4 class="font-semibold text-green-900 mb-2">Example</h4>
                                    <div class="code-block">
                                        <div class="p-4 font-mono text-sm">
                                            <div><span class="syntax-comment">// After authentication</span></div>
                                            <div><span class="syntax-keyword">const</span> <span class="syntax-variable">data</span> = <span class="syntax-keyword">await</span> <span class="syntax-variable">session</span>.<span class="syntax-function">capture</span>(<span class="syntax-variable">page</span>);</div>
                                            <div><span class="syntax-function">console</span>.<span class="syntax-function">log</span>(<span class="syntax-string">`Captured ${data.cookies.length} cookies`</span>);</div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Restore Method -->
                            <div class="border border-gray-200 rounded-lg p-6">
                                <h3 class="text-lg font-semibold text-gray-900 mb-3">session.restore(page)</h3>
                                <p class="text-gray-600 mb-4">Restores the captured session state to a new browser page or context.</p>
                                
                                <div class="code-block mb-4">
                                    <div class="p-4 font-mono text-sm">
                                        <div><span class="syntax-keyword">async</span> <span class="syntax-function">restore</span>(<span class="syntax-variable">page</span>: <span class="syntax-type">Page</span>): <span class="syntax-type">Promise&lt;void&gt;</span></div>
                                    </div>
                                </div>

                                <div class="bg-purple-50 border border-purple-200 rounded-lg p-4">
                                    <h4 class="font-semibold text-purple-900 mb-2">Example</h4>
                                    <div class="code-block">
                                        <div class="p-4 font-mono text-sm">
                                            <div><span class="syntax-comment">// In a new browser context</span></div>
                                            <div><span class="syntax-keyword">await</span> <span class="syntax-variable">session</span>.<span class="syntax-function">restore</span>(<span class="syntax-variable">newPage</span>);</div>
                                            <div><span class="syntax-keyword">await</span> <span class="syntax-variable">newPage</span>.<span class="syntax-function">goto</span>(<span class="syntax-string">'https://gmail.com'</span>);</div>
                                            <div><span class="syntax-comment">// Already authenticated!</span></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </section>

                    <!-- Adapter API -->
                    <section id="adapter" class="mb-12">
                        <h2 class="text-2xl font-bold text-gray-900 mb-4">
                            <i class="fas fa-plug text-green-600 mr-2"></i>
                            Adapter
                        </h2>
                        
                        <p class="text-gray-600 mb-6">
                            Adapters provide framework-specific implementations for different browser automation tools.
                        </p>

                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                            <div class="bg-blue-50 rounded-lg p-4">
                                <h4 class="font-semibold text-blue-900 mb-2">Available Adapters</h4>
                                <ul class="space-y-1 text-blue-800">
                                    <li>• PlaywrightAdapter</li>
                                    <li>• SkyvernAdapter</li>
                                    <li>• StagehandAdapter</li>
                                    <li>• BrowserbaseAdapter</li>
                                    <li>• HyperbrowserAdapter</li>
                                </ul>
                            </div>
                            
                            <div class="bg-green-50 rounded-lg p-4">
                                <h4 class="font-semibold text-green-900 mb-2">Adapter Interface</h4>
                                <ul class="space-y-1 text-green-800">
                                    <li>• connect()</li>
                                    <li>• captureState()</li>
                                    <li>• restoreState()</li>
                                    <li>• disconnect()</li>
                                </ul>
                            </div>
                        </div>

                        <div class="code-block">
                            <div class="p-4 font-mono text-sm">
                                <div><span class="syntax-keyword">import</span> { <span class="syntax-variable">PlaywrightAdapter</span> } <span class="syntax-keyword">from</span> <span class="syntax-string">'@psp/adapter-playwright'</span>;</div>
                                <div class="mt-2"><span class="syntax-keyword">const</span> <span class="syntax-variable">adapter</span> = <span class="syntax-keyword">new</span> <span class="syntax-function">PlaywrightAdapter</span>();</div>
                                <div><span class="syntax-keyword">await</span> <span class="syntax-variable">adapter</span>.<span class="syntax-function">connect</span>(<span class="syntax-variable">page</span>);</div>
                                <div><span class="syntax-keyword">const</span> <span class="syntax-variable">state</span> = <span class="syntax-keyword">await</span> <span class="syntax-variable">adapter</span>.<span class="syntax-function">captureState</span>();</div>
                            </div>
                        </div>
                    </section>

                    <!-- CLI API -->
                    <section id="cli" class="mb-12">
                        <h2 class="text-2xl font-bold text-gray-900 mb-4">
                            <i class="fas fa-terminal text-purple-600 mr-2"></i>
                            CLI Commands
                        </h2>
                        
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div class="border border-gray-200 rounded-lg p-6">
                                <h3 class="font-semibold text-gray-900 mb-3">Session Management</h3>
                                <div class="space-y-3 font-mono text-sm">
                                    <div><span class="text-blue-600">psp list</span> <span class="text-gray-500">[--status] [--tags]</span></div>
                                    <div><span class="text-blue-600">psp create</span> <span class="text-gray-500">&lt;name&gt; [description]</span></div>
                                    <div><span class="text-blue-600">psp delete</span> <span class="text-gray-500">&lt;sessionId&gt;</span></div>
                                    <div><span class="text-blue-600">psp export</span> <span class="text-gray-500">&lt;sessionId&gt; [--format]</span></div>
                                </div>
                            </div>
                            
                            <div class="border border-gray-200 rounded-lg p-6">
                                <h3 class="font-semibold text-gray-900 mb-3">Browser Operations</h3>
                                <div class="space-y-3 font-mono text-sm">
                                    <div><span class="text-green-600">psp launch</span> <span class="text-gray-500">[--url] [--profile]</span></div>
                                    <div><span class="text-green-600">psp capture</span> <span class="text-gray-500">&lt;sessionId&gt;</span></div>
                                    <div><span class="text-green-600">psp restore</span> <span class="text-gray-500">&lt;sessionId&gt;</span></div>
                                    <div><span class="text-green-600">psp test</span> <span class="text-gray-500">[--platform]</span></div>
                                </div>
                            </div>
                        </div>
                    </section>

                    <!-- MCP Tools -->
                    <section id="mcp" class="mb-12">
                        <h2 class="text-2xl font-bold text-gray-900 mb-4">
                            <i class="fas fa-robot text-red-600 mr-2"></i>
                            MCP Tools
                        </h2>
                        
                        <p class="text-gray-600 mb-6">
                            PSP provides 12 Model Context Protocol tools for AI integration with Smithery.ai and other MCP clients.
                        </p>

                        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                            <div class="bg-gray-50 rounded-lg p-4">
                                <h4 class="font-semibold text-gray-900 mb-2">Session Tools</h4>
                                <ul class="text-sm text-gray-600 space-y-1">
                                    <li>• psp_list_sessions</li>
                                    <li>• psp_create_session</li>
                                    <li>• psp_delete_session</li>
                                    <li>• psp_capture_session</li>
                                </ul>
                            </div>
                            
                            <div class="bg-gray-50 rounded-lg p-4">
                                <h4 class="font-semibold text-gray-900 mb-2">Data Tools</h4>
                                <ul class="text-sm text-gray-600 space-y-1">
                                    <li>• psp_restore_session</li>
                                    <li>• psp_export_session</li>
                                    <li>• psp_import_session</li>
                                    <li>• psp_manage_cookies</li>
                                </ul>
                            </div>
                            
                            <div class="bg-gray-50 rounded-lg p-4">
                                <h4 class="font-semibold text-gray-900 mb-2">Testing Tools</h4>
                                <ul class="text-sm text-gray-600 space-y-1">
                                    <li>• psp_test_platform</li>
                                    <li>• psp_validate_session</li>
                                    <li>• psp_browser_launch</li>
                                    <li>• psp_adapter_status</li>
                                </ul>
                            </div>
                        </div>

                        <div class="mt-6 bg-blue-50 border border-blue-200 rounded-lg p-6">
                            <h4 class="font-semibold text-blue-900 mb-3">Start MCP Server</h4>
                            <div class="code-block">
                                <div class="p-4 font-mono text-sm">
                                    <div class="text-gray-400"># Start the MCP server</div>
                                    <div><span class="syntax-keyword">psp</span> <span class="syntax-function">mcp</span> <span class="syntax-variable">--port</span> <span class="syntax-string">3001</span></div>
                                    <div class="mt-2 text-gray-400"># Server available at http://localhost:3001/mcp</div>
                                </div>
                            </div>
                        </div>
                    </section>

                    <!-- Type Definitions -->
                    <section class="bg-gray-50 rounded-lg p-8">
                        <h2 class="text-2xl font-bold text-gray-900 mb-4">
                            <i class="fas fa-code text-indigo-600 mr-2"></i>
                            Type Definitions
                        </h2>
                        
                        <div class="code-block">
                            <div class="p-4 font-mono text-sm">
                                <div><span class="syntax-keyword">interface</span> <span class="syntax-type">SessionData</span> {</div>
                                <div>&nbsp;&nbsp;<span class="syntax-variable">cookies</span>: <span class="syntax-type">Cookie[]</span>;</div>
                                <div>&nbsp;&nbsp;<span class="syntax-variable">localStorage</span>: <span class="syntax-type">Record&lt;string, string&gt;</span>;</div>
                                <div>&nbsp;&nbsp;<span class="syntax-variable">sessionStorage</span>: <span class="syntax-type">Record&lt;string, string&gt;</span>;</div>
                                <div>&nbsp;&nbsp;<span class="syntax-variable">history</span>: <span class="syntax-type">HistoryEntry[]</span>;</div>
                                <div>&nbsp;&nbsp;<span class="syntax-variable">tokens</span>?: <span class="syntax-type">AuthToken[]</span>;</div>
                                <div>&nbsp;&nbsp;<span class="syntax-variable">metadata</span>: <span class="syntax-type">SessionMetadata</span>;</div>
                                <div>}</div>
                                <div class="mt-4"><span class="syntax-keyword">interface</span> <span class="syntax-type">Cookie</span> {</div>
                                <div>&nbsp;&nbsp;<span class="syntax-variable">name</span>: <span class="syntax-type">string</span>;</div>
                                <div>&nbsp;&nbsp;<span class="syntax-variable">value</span>: <span class="syntax-type">string</span>;</div>
                                <div>&nbsp;&nbsp;<span class="syntax-variable">domain</span>: <span class="syntax-type">string</span>;</div>
                                <div>&nbsp;&nbsp;<span class="syntax-variable">path</span>: <span class="syntax-type">string</span>;</div>
                                <div>&nbsp;&nbsp;<span class="syntax-variable">expires</span>?: <span class="syntax-type">number</span>;</div>
                                <div>&nbsp;&nbsp;<span class="syntax-variable">httpOnly</span>?: <span class="syntax-type">boolean</span>;</div>
                                <div>&nbsp;&nbsp;<span class="syntax-variable">secure</span>?: <span class="syntax-type">boolean</span>;</div>
                                <div>&nbsp;&nbsp;<span class="syntax-variable">sameSite</span>?: <span class="syntax-string">'Strict'</span> | <span class="syntax-string">'Lax'</span> | <span class="syntax-string">'None'</span>;</div>
                                <div>}</div>
                            </div>
                        </div>
                    </section>
                </div>
            </div>
        </div>
    </div>
</body>
</html>